{{/*
Copyright (c) 2025 VH & Co BV. Licensed under the Business Source License 1.1.

Runtime configuration for the frontend SPA.
This ConfigMap generates env.js which is mounted into the nginx web root.
Values are derived from the Helm chart's ingress and Zitadel configuration
so the frontend image is generic and works with any domain.
*/}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "stackweaver.fullname" . }}-frontend-config
  labels:
    {{- include "stackweaver.labels" . | nindent 4 }}
    app.kubernetes.io/component: frontend
data:
  env.js: |
    // Auto-generated by StackWeaver Helm chart â€” do not edit
    window.__STACKWEAVER__ = {
      VITE_API_URL: "{{ include "stackweaver.api.url" . }}",
      VITE_ZITADEL_ISSUER: "{{ include "stackweaver.zitadel.issuer" . }}",
      VITE_ZITADEL_REDIRECT_URI: "{{ include "stackweaver.frontend.redirectURI" . }}",
    };
